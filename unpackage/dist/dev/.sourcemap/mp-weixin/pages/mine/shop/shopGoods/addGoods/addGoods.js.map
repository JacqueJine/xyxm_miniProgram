{"version":3,"sources":["uni-app:///main.js","webpack:///E:/Project/xyxm_miniProgram/pages/mine/shop/shopGoods/addGoods/addGoods.vue?32ed","webpack:///E:/Project/xyxm_miniProgram/pages/mine/shop/shopGoods/addGoods/addGoods.vue?d319","webpack:///E:/Project/xyxm_miniProgram/pages/mine/shop/shopGoods/addGoods/addGoods.vue?9351","webpack:///E:/Project/xyxm_miniProgram/pages/mine/shop/shopGoods/addGoods/addGoods.vue?b2fb","uni-app:///pages/mine/shop/shopGoods/addGoods/addGoods.vue","webpack:///E:/Project/xyxm_miniProgram/pages/mine/shop/shopGoods/addGoods/addGoods.vue?2c90","webpack:///E:/Project/xyxm_miniProgram/pages/mine/shop/shopGoods/addGoods/addGoods.vue?b502"],"names":["createPage","Page"],"mappings":"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OANA,MAMA;AACA;AACA,0BADA;AAEA,sBAFA;;AAIA;AACA,OANA,MAMA;AACA;AACA,0BADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA,sBADA;AAEA,kBAFA;;AAIA;AACA;AACA;AACA,6BADA;AAEA,YAFA,CAEA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;;AAIA;AACA;AACA;AACA,aAFA,EAEA,IAFA;AAGA;AACA,SAbA;AAcA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,YAFA,CAEA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;;AAIA;AACA;AACA;AACA,aAFA,EAEA,IAFA;AAGA;AACA,SAbA;AAcA;AACA,KAnMA,EAlCA;;AAuOA;AACA;AACA;AACA,WADA,CACA;AADA,OAEA,IAFA,CAEA;AACA;AACA;AACA;AACA,KANA;AAOA;AACA,sBADA;AAEA;AACA;AACA,OAJA;;AAMA;AACA,yCADA;;AAGA;AACA;AACA;AACA,sBADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEADA,EADA;;;AAKA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,wCAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OApCA;AAqCA;;AAEA;AACA;AACA,mBADA;AAEA,QAFA,CAEA;AACA;AACA;AACA;AACA,KANA;AAOA;AACA;AACA,WADA,CACA;AADA,OAEA,IAFA,CAEA;AACA;AACA;AACA;AACA,KANA;AAOA,GAlTA;AAmTA,QAnTA,oBAmTA;AACA;AACA;AACA,sBADA;AAEA,aAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;AACA,OAPA;;AASA,GA9TA,E;;;;;;;;;;;;;ACvGA;AAAA;AAAA;AAAA;AAAy9B,CAAgB,m9BAAG,EAAC,C;;;;;;;;;;;ACA7+B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/mine/shop/shopGoods/addGoods/addGoods.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/mine/shop/shopGoods/addGoods/addGoods.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./addGoods.vue?vue&type=template&id=0bdf6afa&scoped=true&\"\nvar renderjs\nimport script from \"./addGoods.vue?vue&type=script&lang=js&\"\nexport * from \"./addGoods.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addGoods.vue?vue&type=style&index=0&id=0bdf6afa&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bdf6afa\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mine/shop/shopGoods/addGoods/addGoods.vue\"\nexport default component.exports","export * from \"-!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./addGoods.vue?vue&type=template&id=0bdf6afa&scoped=true&\"","var components = {\n  uField: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-field/u-field\" */ \"uview-ui/components/u-field/u-field.vue\"\n    )\n  },\n  uCellItem: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-cell-item/u-cell-item\" */ \"uview-ui/components/u-cell-item/u-cell-item.vue\"\n    )\n  },\n  uSwitch: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-switch/u-switch\" */ \"uview-ui/components/u-switch/u-switch.vue\"\n    )\n  },\n  uUpload: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-upload/u-upload\" */ \"uview-ui/components/u-upload/u-upload.vue\"\n    )\n  },\n  uButton: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n    )\n  },\n  helangCompress: function() {\n    return import(\n      /* webpackChunkName: \"components/helang-compress/helang-compress\" */ \"@/components/helang-compress/helang-compress.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./addGoods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./addGoods.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"main\">\n    <view class=\"title\">必填商品信息</view>\n    <view class=\"inputGroup\">\n      <u-field\n        v-model=\"formInfo.name\"\n        label=\"商品名称\"\n        label-width=\"150\"\n        placeholder=\"请输入名称（不超8个字）\"\n        maxlength=\"8\"\n      >\n      </u-field>\n      <u-field\n        v-model=\"formInfo.price\"\n        label=\"价格（元）\"\n        label-width=\"150\"\n        placeholder=\"请输入价格\"\n      >\n      </u-field>\n    </view>\n    <view class=\"title\">是否设为热销商品（{{ shopHotNum }}/{{ hotNum }}）</view>\n    <view class=\"inputGroup\">\n      <u-cell-item title=\"设为热销商品\" :arrow=\"false\">\n        <u-switch v-model=\"formInfo.hot\" @change=\"changeHot\"></u-switch>\n      </u-cell-item>\n    </view>\n    <view class=\"title\">\n      <view> 商品分类 </view>\n      <view class=\"add\" @click=\"toPage(2)\">新建分类</view>\n    </view>\n    <view class=\"classList\">\n      <view\n        :class=\"sel[index] == item.id ? 'classItem actClass' : 'classItem'\"\n        v-for=\"(item, index) in list\"\n        :key=\"index\"\n        @click=\"selClass(index, item.id)\"\n        >{{ item.name }}</view\n      >\n    </view>\n    <view> </view>\n    <view class=\"title\">其他信息</view>\n    <view class=\"inputGroup\">\n      <u-cell-item title=\"商品图片\" :arrow=\"false\" :title-style=\"titleStyle\">\n        <u-upload\n          :action=\"action\"\n\t\t\t\t\t:size-type=\"['compressed']\"\n          max-count=\"1\"\n          :file-list=\"fileList\"\n          @on-remove=\"onRemove\"\n          :show-tips=\"false\"\n          @on-success=\"onSuccess\"\n          ref=\"uUpload\"\n          :auto-upload=\"true\"\n\t\t\t\t\t:before-upload=\"beforeUpload\"\n        ></u-upload>\n      </u-cell-item>\n    </view>\n    <view class=\"inputGroup\">\n      <u-field\n        v-model=\"formInfo.num\"\n        label=\"商品库存\"\n        placeholder=\"请输入库存数\"\n      >\n      </u-field>\n    </view>\n    <view class=\"title\">商品介绍（可不填）</view>\n    <view class=\"inputGroup\">\n      <!-- <view class=\"last\"></view> -->\n      <view class=\"lastBtn\">\n        <u-button\n          v-if=\"!hasIntroduce\"\n          @click=\"toPage(1)\"\n          shape=\"circle\"\n          :plain=\"true\"\n          >点击添加商品介绍</u-button\n        >\n        <u-button v-else @click=\"toPage(1)\" shape=\"circle\"\n          >已添加，点击查看</u-button\n        >\n      </view>\n    </view>\n    <view class=\"foot\">\n      <view v-if=\"!isEdit\" @click=\"toList(2)\"> 保存为下架商品</view>\n      <view v-if=\"!isEdit\" @click=\"toList(1)\"> 保存后上架</view>\n      <view id=\"red\" v-if=\"isEdit\" @click=\"toList(3)\"> 删除</view>\n      <view v-if=\"isEdit\" @click=\"toList(4)\"> 保存</view>\n    </view>\n    <helang-compress ref=\"helangCompress\"></helang-compress>\n  </view>\n</template>\n\n<script>\nimport {\n  getClass,\n  createGood,\n  goodsDetail,\n  hotCount,\n  delGoods,\n  editGoods,\n} from \"../../../../../services/shop.js\";\nimport { getInfoSystem } from \"../../../../../services/function.js\";\nimport { delImages } from \"../../../../../services/community.js\";\nimport helangCompress from \"@/components/helang-compress/helang-compress\";\nexport default {\n  components: {\n    helangCompress,\n  },\n  data() {\n    return {\n      fileList: [],\n      isEdit: false,\n      hasIntroduce: false,\n      titleStyle: {\n        width: \"130rpx\",\n      },\n      action: getApp().globalData.imgBaseUrl + \"/common/upload/image.html\",\n      list: [],\n      hotNum: 0,\n      shopHotNum: 0,\n      sel: [],\n      formInfo: {\n        store_id: 1,\n        class_id: [],\n        name: \"\",\n        price: \"\",\n        hot: false,\n        goodsimage: \"\",\n        num: \"\",\n        introduce: \"\",\n        picture: [],\n        shelves: 1,\n      },\n      id: \"\",\n      loading: false,\n    };\n  },\n\n  methods: {\n    changeHot(value) {\n      if (value) {\n        if (this.shopHotNum >= this.hotNum) {\n          uni.showToast({\n            title: \"热销商品已达到上限，无法添加\",\n            icon: \"none\",\n          });\n          this.formInfo.hot = false;\n          return false;\n        }\n        this.shopHotNum++;\n      } else {\n        if (this.shopHotNum == 0) {\n          return false;\n        }\n        this.shopHotNum--;\n      }\n    },\n    // 选择class\n    selClass(index, id) {\n      if (this.sel[index] == id) {\n        this.$set(this.sel, index, \"\");\n      } else {\n        this.$set(this.sel, index, id);\n      }\n    },\n    toPage(index) {\n      let url = \"\";\n      if (index == 1) {\n        url = \"/pages/mine/shop/shopGoods/goodsInfo/goodsInfo\";\n      } else if (index == 2) {\n        url = \"/pages/mine/shop/shopGoods/goodsClass/goodsClass\";\n      }\n      uni.navigateTo({\n        url: url,\n      });\n    },\n    // 图片上传\nasync beforeUpload(index, lists) {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '检测中...',\n\t\t\t\tmask: true\n\t\t\t});\n\t\t\ttry {\n\t\t\t\tawait this.$refs.helangCompress\n\t\t\t\t\t.compress({\n\t\t\t\t\t\tsrc: lists[index].url\n\t\t\t\t\t})\n\t\t\t\t\t.then(async res => {\n\t\t\t\t\t\tawait this.$check.checkImg1(index, res, lists);\n\t\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('e', e);\n\t\t\t}\n\t\t},\n    onSuccess(data, index, lists, name) {\n      if (data.code == 200) {\n        this.formInfo.goodsimage = data.result.src;\n      } else {\n        uni.showToast({\n          title: data.message,\n          icon: \"none\",\n        });\n      }\n    },\n    onRemove(index, lists) {\n      delImages({\n        path: this.forminfo.goodsimage,\n      }).then((res) => {\n        uni.showToast({\n          title: res.message,\n          icon: \"none\",\n        });\n        if (res.code == 200) {\n          this.formInfo.goodsimage = \"\";\n        }\n      });\n    },\n    toList(index) {\n      let that = this;\n\n      this.formInfo.class_id = [];\n      for (let i in this.sel) {\n        if (this.sel[i] != \"\") {\n          this.formInfo.class_id.push(this.sel[i]);\n        }\n      }\n      // console.log(this.formInfo);\n      this.formInfo.class_id = this.formInfo.class_id.toString();\n      let regMoney = /(^[1-9](\\d+)?(\\.\\d{1,2})?$)|(^[1-9]$)|(^\\d\\.[1-9]{1,2}$)|(^\\d\\.[0]{1}[1-9]{1}$|(^\\d\\.[1-9]{1}[0]{1}$)$)/;\n      if (index == 3) {\n        uni.showModal({\n          title: \"警告\",\n          content: \"确定要删除该商品吗\",\n          success: function (res) {\n            if (res.confirm) {\n              uni.showLoading({\n                title: \"提交中……\",\n                mask: true,\n              });\n              delGoods({\n                id: that.id,\n              }).then((res) => {\n                uni.hideLoading();\n                uni.showToast({\n                  title: res.message,\n                  icon: \"none\",\n                });\n                if (res.code == 200) {\n                  setTimeout(() => {\n                    uni.navigateBack();\n                  }, 1500);\n                }\n              });\n              // console.log('用户点击确定');\n            } else if (res.cancel) {\n              // console.log('用户点击取消');\n            }\n          },\n        });\n        return false;\n      } else if (this.formInfo.name == \"\") {\n        uni.showToast({\n          title: \"请输入名称\",\n          icon: \"none\",\n        });\n        return false;\n      } else if (\n        !regMoney.test(this.formInfo.price) ||\n        Number(this.formInfo.price) >= 10000\n      ) {\n        uni.showToast({\n          title: \"请输入正确价格,且不能超过1万\",\n          icon: \"none\",\n        });\n        return false;\n      } else if (this.formInfo.class_id.length < 1) {\n        uni.showToast({\n          title: \"请选择商品分类\",\n          icon: \"none\",\n        });\n        return false;\n      } else if (this.formInfo.goodsimage == \"\") {\n        uni.showToast({\n          title: \"请选择商品图片\",\n          icon: \"none\",\n        });\n        return false;\n      } else if (!/^[1-9]\\d*$/.test(this.formInfo.num)) {\n        uni.showToast({\n          title: \"请输入正确库存\",\n          icon: \"none\",\n        });\n        return false;\n      }\n      uni.showLoading({\n        title: \"提交中……\",\n        mask: true,\n      });\n      if (index == 1 || index == 2) {\n        this.formInfo.shelves = index;\n        createGood({\n          data: this.formInfo,\n        }).then((res) => {\n          uni.hideLoading();\n          uni.showToast({\n            title: res.message,\n            icon: \"none\",\n          });\n          if (res.code == 200) {\n            setTimeout(() => {\n              uni.navigateBack();\n            }, 1500);\n          }\n        });\n      }\n      // 编辑\n      if (index == 4) {\n        this.formInfo.id = this.id;\n        editGoods({\n          data: this.formInfo,\n        }).then((res) => {\n          uni.hideLoading();\n          uni.showToast({\n            title: res.message,\n            icon: \"none\",\n          });\n          if (res.code == 200) {\n            setTimeout(() => {\n              uni.navigateBack();\n            }, 1500);\n          }\n        });\n      }\n    },\n  },\n  onLoad: function (options) {\n    // 店铺商品分类\n    getClass({\n      id: 1, //店铺id\n    }).then((res) => {\n      if (res.code == 200) {\n        this.list = res.result;\n      }\n    });\n    uni.removeStorage({\n      key: \"goodsInfo\",\n      success: function (res) {\n        // console.log('success');\n      },\n    });\n    uni.setNavigationBarTitle({\n      title: options.id ? \"编辑商品\" : \"添加商品\",\n    });\n    if (options.id) {\n      this.isEdit = true;\n      goodsDetail({\n        id: options.id,\n      }).then((res) => {\n        if (res.code == 200) {\n          for (let i in this.formInfo) {\n            this.formInfo[i] = res.result[i];\n          }\n          this.id = res.result.id;\n          // 商品图预览\n          this.fileList = [\n            {\n              url: getApp().globalData.imgBaseUrl + res.result.goodsimage,\n            },\n          ];\n          if (res.result.introduce == \"\" && res.result.picture.length < 1) {\n            this.hasIntroduce = false;\n          } else {\n            let info = {};\n            info.introduce = res.result.introduce;\n            info.picture = res.result.picture;\n            this.hasIntroduce = true;\n            uni.setStorage({\n              key: \"goodsInfo\",\n              data: JSON.stringify(info),\n            });\n          }\n          let arr = res.result.class_id.split(\",\");\n          for (let i in this.list) {\n            for (let j in arr) {\n              if (this.list[i].id == arr[j]) {\n                this.sel[i] = this.list[i].id;\n              }\n            }\n          }\n          console.log(this.sel);\n        }\n      });\n    }\n\n    // 后台设置的热销数量\n    getInfoSystem({\n      key: \"热销商品数量\",\n    }).then((res) => {\n      if (res.code == 200) {\n        this.hotNum = res.result.value;\n      }\n    });\n    // 本店铺的热销数量\n    hotCount({\n      id: 1, //店铺id\n    }).then((res) => {\n      if (res.code == 200) {\n        this.shopHotNum = res.result.count;\n      }\n    });\n  },\n  onShow() {\n    let that = this;\n    uni.getStorage({\n      key: \"goodsInfo\",\n      success(res) {\n        let options = JSON.parse(res.data);\n        that.hasIntroduce = true;\n        that.formInfo.introduce = options.introduce;\n        that.formInfo.picture = options.picture;\n      },\n    });\n  },\n};\n</script>\n\n<style scoped>\n.main {\n  min-height: 100vh;\n  background: #f2f2f2;\n  box-sizing: border-box;\n  padding: 16rpx 24rpx 108rpx;\n}\n\n.title {\n  font-size: 24rpx;\n  color: rgba(51, 51, 51, 0.4);\n  margin-bottom: 16rpx;\n  padding-top: 20rpx;\n  display: flex;\n  justify-content: space-between;\n}\n\n.inputGroup {\n  background: #fff;\n  border-radius: 16rpx;\n  margin-bottom: 16rpx;\n  overflow: hidden !important;\n}\n\n.add {\n  color: rgba(22, 119, 255, 1);\n}\n\n.last {\n  padding: 32rpx;\n  font-size: 24rpx;\n}\n\n.lastBtn {\n  display: flex;\n  justify-content: center;\n  margin: 60rpx 0;\n}\n\n.foot {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 98rpx;\n  background: #fff;\n  box-shadow: 0px -1px 0px 0px rgba(196, 196, 196, 0.5);\n  display: flex;\n  justify-content: space-between;\n  color: rgba(0, 145, 255, 1);\n  font-size: 28rpx;\n  z-index: 999;\n}\n\n.foot view {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.foot view:first-child {\n  color: rgba(121, 121, 121, 1);\n  border-right: 1px solid #f3f3f3;\n}\n\n#red {\n  color: #ff3939;\n}\n\n.classList {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.classItem {\n  font-size: 24rpx;\n  padding: 0 13rpx;\n  height: 54rpx;\n  line-height: 54rpx;\n  background: #fff;\n  margin: 0 16rpx 16rpx 0;\n  border: 2rpx solid #fff;\n  border-radius: 2rpx;\n}\n\n.actClass {\n  color: #1677ff;\n  border: 2rpx solid #0091ff;\n}\n</style>\n","import mod from \"-!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./addGoods.vue?vue&type=style&index=0&id=0bdf6afa&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./addGoods.vue?vue&type=style&index=0&id=0bdf6afa&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1609737880758\n      var cssReload = require(\"D:/Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}