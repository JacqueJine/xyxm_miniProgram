(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/havePublished/orderDetail/orderDetail"],{"0c98":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"21b6"))},uCountDown:function(){return n.e("node-modules/uview-ui/components/u-count-down/u-count-down").then(n.bind(null,"b16b"))},uLoadmore:function(){return n.e("node-modules/uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"811d"))},uPopup:function(){return n.e("node-modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"d202"))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-upload/u-upload")]).then(n.bind(null,"f218"))},helangCompress:function(){return n.e("components/helang-compress/helang-compress").then(n.bind(null,"d5f6"))}},i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.textFocus=!0},t.e1=function(e){t.textFocus=!1},t.e2=function(e){t.showReply=!t.showReply},t.e3=function(e){t.showModal=!1})},o=[]},"0dac":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"21b6"))}},i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},"1f3a":function(t,e,n){"use strict";n.r(e);var a=n("e863"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"347a":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=u(n("a34a")),i=n("6c29"),o=n("8b93"),s=u(n("a95f"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,a,i,o,s){try{var u=t[o](s),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(a,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function s(t){c(o,a,i,s,u,"next",t)}function u(t){c(o,a,i,s,u,"throw",t)}s(void 0)}))}}var r=function(){n.e("components/perFunctionInfo/leaveMess1/leaveMess").then(function(){return resolve(n("d2ae"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/helang-compress/helang-compress").then(function(){return resolve(n("d5f6"))}.bind(null,n)).catch(n.oe)},f={components:{LeaveMess:s.default,LeaveMess1:r,helangCompress:d},data:function(){return{truemoney:0,textFocus:!1,rate5:"",qutime:"",allrate:"",task_id:"",action:getApp().globalData.imgBaseUrl+"/common/upload/image.html",navTop:getApp().globalData.navTop,navHeight:getApp().globalData.navHeight,showliuyan:!1,showModal:!1,showReply:!1,alldata:"",page:1,page1:1,liuList:[],allLiu:0,huiList:[],comment:"",img:[],fid:0,imgBaseUrl:getApp().globalData.imgBaseUrl,comment_up_id:0,placeholder:"",up_user_id:"",inform:"",juType:2,task_comment_id:"",inform_user_id:"",status:"loading",iconType:"flower",loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"},is_Write1:!1,status1:"loading"}},methods:{goOrder:function(){var e=this;t.requestSubscribeMessage({tmplIds:["Q0dB1QJc9GcGSfT5tpj6GBbf53JiHhz6RDQZOVM6i3Y","mc5xJywLUfHxkLOaV2oIzYBbO3O0AqjTxq75RRAh_ps","VkSklDJC5xONLGxOfWoJS1uWdVzBztd--rZasHzsMMI"],complete:function(n){t.navigateTo({url:"/pages/addIssue/issueOrder/issueOrder?id="+e.alldata.id})}})},onBottom:function(){if("nomore"==this.status1)return!1;this.getliu()},showWrite:function(e,n){var a=this;t.requestSubscribeMessage({tmplIds:["Q0dB1QJc9GcGSfT5tpj6GBbf53JiHhz6RDQZOVM6i3Y"],complete:function(t){a.is_Write1=!1,a.comment="",a.comment_up_id=0,a.img=[],a.$refs["uUpload"].clear(),void 0==e?(a.fid=0,a.up_user_id=a.alldata.user_id):(a.fid=e,a.up_user_id=n),a.showliuyan=!a.showliuyan}})},showWrite1:function(e,n,a){var i=this;t.requestSubscribeMessage({tmplIds:["Q0dB1QJc9GcGSfT5tpj6GBbf53JiHhz6RDQZOVM6i3Y"],complete:function(t){i.is_Write1=!0,i.img=[],i.$refs["uUpload"].clear(),i.placeholder="回复 @"+a+"：",i.comment="",i.comment_up_id=e,i.up_user_id=n,i.showliuyan=!i.showliuyan}})},toMinePage:function(e){t.navigateTo({url:"/pages/community/minePage/minePage?id="+e})},toPraise:function(e,n,a,o,s){var u=this;(0,i.Praise)({data:{type:e,task_comment_id:n,praise_user_id:a,user_id:JSON.parse(t.getStorageSync("user")).id}}).then((function(t){200==t.code&&(0==s?1==e?(u.liuList[o].is_praise=!0,u.liuList[o].praise_count++,u.$forceUpdate()):(u.liuList[o].is_praise=!1,u.liuList[o].praise_count--,u.$forceUpdate()):(console.log(u.huiList,o),1==e?(u.huiList[o].is_praise=!0,u.huiList[o].praise_count++,u.$forceUpdate()):(u.huiList[o].is_praise=!1,u.huiList[o].praise_count--,u.$forceUpdate())))}))},getList:function(){var t=this;(0,i.listComment)({where:{task_id:this.alldata.id},limit:10,page:this.page}).then((function(e){200==e.code?(t.allLiu=e.result.count,t.liuList=t.liuList.concat(e.result.data),t.page++,e.result.count<=10&&(t.status="nomore")):t.status="nomore"}))},beforeUpload:function(e,n){var i=this;return l(a.default.mark((function o(){return a.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.showLoading({title:"检测中...",mask:!0}),o.prev=1,o.next=4,i.$refs.helangCompress.compress({src:n[e].url}).then(function(){var t=l(a.default.mark((function t(o){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.$check.checkImg1(e,o,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:o.next=9;break;case 6:o.prev=6,o.t0=o["catch"](1),console.log("e",o.t0);case 9:case"end":return o.stop()}}),o,null,[[1,6]])})))()},onSuccess:function(e,n,a,i){200==e.code?this.img.push({path:e.result.src}):t.showToast({title:e.message,icon:"none"})},onRemove:function(e,n){var a=this;(0,o.delImages)(this.img[e]).then((function(n){t.showToast({title:n.message,icon:"none"}),200==n.code&&a.img.splice(e,1)}))},addComm:function(){var e=this;return l(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(""==e.comment&&e.img.length<1)){n.next=3;break}return t.showToast({title:"内容和图片至少选择一样评论",icon:"none"}),n.abrupt("return",!1);case 3:return n.prev=3,n.next=6,e.$check.checkTxt(e.comment);case 6:n.sent,n.next=13;break;case 9:return n.prev=9,n.t0=n["catch"](3),e.comment="",n.abrupt("return",!1);case 13:t.showLoading({title:"提交中……",mask:!0}),(0,i.insertComment)({task_id:e.alldata.id,data:{fid:e.fid,comment:e.comment,img:e.img,comment_up_id:e.comment_up_id,up_user_id:e.up_user_id}}).then((function(n){t.showToast({title:n.message,icon:"none"}),t.hideLoading(),200==n.code&&(e.showliuyan=!e.showliuyan,e.is_Write1?(e.page1=1,e.huiList=[],e.status1="loading",e.getliu()):(e.page=1,e.liuList=[],e.status="loading",e.getList()))}));case 15:case"end":return n.stop()}}),n,null,[[3,9]])})))()},showPop:function(e,n){var a=this,i=[];e.forEach((function(t){i.push(a.imgBaseUrl+t.path)})),t.previewImage({current:n,urls:i})},moreBtn1:function(e,n){var a=this;t.showActionSheet({itemList:JSON.parse(t.getStorageSync("user")).id==n?["我要删除"]:["我要举报"],itemColor:JSON.parse(t.getStorageSync("user")).id==n?"#ff0000":"#000000",success:function(o){JSON.parse(t.getStorageSync("user")).id!=n?(a.inform="",a.juType=1,a.task_comment_id=e,a.inform_user_id=n,a.showModal=!a.showModal):t.showModal({title:"警告",content:"确定要删除该评论吗",success:function(n){n.confirm?(0,i.delComment)({id:e,user_id:JSON.parse(t.getStorageSync("user")).id}).then((function(e){t.showToast({title:e.message,icon:"none"}),200==e.code&&(a.page=1,a.liuList=[],a.status="loading",(0,i.listComment)({where:{task_id:a.alldata.id},limit:10,page:a.page}).then((function(t){200==t.code?(a.allLiu=t.result.count,a.liuList=a.liuList.concat(t.result.data),a.page++,a.showReply=!1,t.result.count<=10&&(a.status="nomore")):(a.allLiu=0,a.status="nomore")})))})):n.cancel}})},fail:function(t){console.log(t.errMsg)}})},moreBtn:function(){var e=this;3==this.alldata.task_state&&1==this.alldata.static_cancel.code||4==this.alldata.task_state||0==this.alldata.task_state&&0==this.alldata.is_pay?t.showActionSheet({itemList:["删除订单"],itemColor:"#ff0000",success:function(n){t.showModal({title:"提示",content:"确定要删除该订单吗",success:function(n){n.confirm?(0,i.delTask)({id:e.alldata.id}).then((function(e){t.showToast({title:e.message,icon:"none"}),200==e.code&&setTimeout((function(){t.navigateBack()}),1500)})):n.cancel}})},fail:function(t){console.log(t.errMsg)}}):0==this.alldata.task_state&&1==this.alldata.is_pay?t.showActionSheet({itemList:["取消订单"],itemColor:"#ff0000",success:function(n){(0,i.taskCancelIsTime)({id:e.alldata.id}).then((function(n){200==n.code&&(1==n.result.cancel_is_time?t.showModal({cancelText:"返回",title:"温馨提示",content:"您发布的任务不超过"+e.qutime+"，将收取"+e.rate5+"%手续费,确定取消吗",success:function(n){n.confirm?(0,i.taskUpdateState)({task_id:e.alldata.id,task_state:3}).then((function(n){t.showToast({title:n.message,icon:"none"}),200==n.code&&(0,i.getInfoTask)({id:e.task_id}).then((function(t){200==t.code&&(e.alldata=t.result)}))})):n.cancel}}):t.showModal({cancelText:"返回",title:"温馨提示",content:"您确定要取消该任务吗",success:function(n){n.confirm?(0,i.taskUpdateState)({task_id:e.alldata.id,task_state:3}).then((function(n){t.showToast({title:n.message,icon:"none"}),200==n.code&&(0,i.getInfoTask)({id:e.task_id}).then((function(t){200==t.code&&(e.alldata=t.result)}))})):n.cancel}}))}))},fail:function(t){console.log(t.errMsg)}}):1==this.alldata.task_state&&t.showActionSheet({itemList:["取消订单"],itemColor:"#ff0000",success:function(n){t.showModal({cancelText:"继续任务",title:"温馨提示",content:"您的任务已被接单，如果取消将扣除金额的"+e.allrate+"%作为补偿，您确定取消吗？",success:function(n){n.confirm?(t.showLoading({title:"提交中……",mask:!0}),(0,i.taskUpdateState)({task_id:e.alldata.id,task_state:3}).then((function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),200==n.code&&(0,i.getInfoTask)({id:e.task_id}).then((function(t){200==t.code&&(e.alldata=t.result)}))}))):n.cancel}})},fail:function(t){console.log(t.errMsg)}})},showhf:function(e){this.page1=1,this.huiList=[],this.fid=e,t.showLoading({title:"加载中"}),this.showReply=!this.showReply,this.getliu()},getliu:function(){var e=this;(0,i.listComment)({where:{fid:this.fid},limit:10,page:this.page1}).then((function(n){t.hideLoading(),200==n.code?(e.huiList=e.huiList.concat(n.result.data),e.page1++,n.result.count<=10&&(e.status1="nomore")):e.status1="nomore"}))},call:function(){t.makePhoneCall({phoneNumber:this.alldata.TaskOrder.PickUser.phone})},submit:function(){var e=this;if(""==this.inform)return t.showToast({title:"请输入举报内容",icon:"none"}),!1;t.showLoading({title:"提交中……",mask:!0});var n={};1==this.juType?(n={task_comment_id:this.task_comment_id,inform_user_id:this.inform_user_id,inform:this.inform},liuInform({data:n}).then((function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),200==n.code&&(e.showModal=!e.showModal)}))):(n={task_id:this.alldata.id,inform_user_id:this.alldata.user_id,inform:this.inform},(0,i.Inform)({data:n}).then((function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),200==n.code&&(e.showModal=!e.showModal)})))},getTask:function(){var e=this;(0,i.getInfoTask)({id:this.task_id}).then((function(n){t.hideLoading(),200==n.code&&(e.alldata=n.result,e.getList(),e.truemoney=e.$Numcheck.rounding(Number(e.alldata.true_urgent_price)+Number(e.alldata.good_prepay)+Number(e.alldata.money),2))}))},haveCompleted:function(){var e=this,n="";if(2==this.alldata.task_state)n=4;else{if(1==this.alldata.task_state&&0==this.alldata.static_cancel.code)return t.showLoading({title:"提交中……",mask:!0}),n=3,(0,i.taskCancel)({task_id:this.alldata.id,task_state:n}).then((function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),200==n.code&&e.getTask()})),!1;if(3!=this.alldata.task_state||0!=this.alldata.static_cancel.code)return 3==this.alldata.task_state&&1==this.alldata.static_cancel.code&&(t.requestSubscribeMessage({tmplIds:["Q0dB1QJc9GcGSfT5tpj6GBbf53JiHhz6RDQZOVM6i3Y","mc5xJywLUfHxkLOaV2oIzYBbO3O0AqjTxq75RRAh_ps","VkSklDJC5xONLGxOfWoJS1uWdVzBztd--rZasHzsMMI"],complete:function(n){3==e.alldata.type?t.navigateTo({url:"/pages/addIssue/otherIssue/otherIssue?issueType=2&id="+e.alldata.id}):1==e.alldata.type?t.navigateTo({url:"/pages/addIssue/expressageIssue/expressageIssue?id="+e.alldata.id}):2==e.alldata.type&&t.navigateTo({url:"/pages/addIssue/otherIssue/otherIssue?issueType=1&id="+e.alldata.id})}}),!1);n=1}t.showModal({title:"提示",content:"确定执行该操作吗？",success:function(a){a.confirm?(t.showLoading({title:"提交中……",mask:!0}),(0,i.taskUpdateState)({task_id:e.alldata.id,task_state:n}).then((function(a){t.hideLoading(),t.showToast({title:a.message,icon:"none"}),200==a.code&&(e.getTask(),4==n&&setTimeout((function(){t.navigateTo({url:"/pages/mine/taskOver/taskOver?id="+e.alldata.id})}),1500))}))):a.cancel}})},haveCompleted1:function(){var e=this;t.showModal({title:"提示",content:"确定执行该操作吗？",success:function(n){n.confirm?(t.showLoading({title:"提交中……",mask:!0}),(0,i.refuseCancel)({task_id:e.alldata.id}).then((function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),e.getTask()}))):n.cancel}})}},onReachBottom:function(){if("nomore"==this.status)return!1;this.status,this.getList()},onLoad:function(e){var n=this;t.showLoading({title:"加载中...",mask:!0}),this.task_id=e.id,this.getTask(),(0,i.taskComplete)({common:"发布人取消百分比"}).then((function(t){200==t.code&&(n.allrate=t.result[0]+t.result[1])})),(0,i.getInfoSystem)({key:"发布人取消任务时间"}).then((function(t){200==t.code&&(n.qutime=n.$Numcheck.rounding(t.result.value/60,0)+"分钟")})),(0,i.getInfoSystem)({key:"发布人取消订单平台扣除发布金额百分比"}).then((function(t){200==t.code&&(n.rate5=t.result.value)}))}};e.default=f}).call(this,n("543d")["default"])},4942:function(t,e,n){},"8e6e":function(t,e,n){"use strict";n.r(e);var a=n("0c98"),i=n("e8ec");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("af7f");var s,u=n("f0c5"),c=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"2c2457ed",null,!1,a["a"],s);e["default"]=c.exports},a95f:function(t,e,n){"use strict";n.r(e);var a=n("0dac"),i=n("1f3a");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("f958");var s,u=n("f0c5"),c=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"c4657df0",null,!1,a["a"],s);e["default"]=c.exports},af7f:function(t,e,n){"use strict";var a=n("e97f"),i=n.n(a);i.a},c599:function(t,e,n){"use strict";(function(t){n("394a");a(n("66fd"));var e=a(n("8e6e"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},e863:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{curHelpInfo:{type:Array,value:[]}},data:function(){return{imgBaseUrl:getApp().globalData.imgBaseUrl}},methods:{toMinePage:function(t){this.$emit("toMinePage",t)},moreBtn:function(t,e){this.$emit("moreBtn",t,e)},showPop:function(t,e){this.$emit("showPop",t,e)},showhf:function(t){this.$emit("showhf",t)},showWrite:function(t,e){this.$emit("showWrite",t,e)},praise:function(t,e,n,a,i){this.$emit("praise",t,e,n,a,i)}}};e.default=a},e8ec:function(t,e,n){"use strict";n.r(e);var a=n("347a"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},e97f:function(t,e,n){},f958:function(t,e,n){"use strict";var a=n("4942"),i=n.n(a);i.a}},[["c599","common/runtime","common/vendor"]]]);