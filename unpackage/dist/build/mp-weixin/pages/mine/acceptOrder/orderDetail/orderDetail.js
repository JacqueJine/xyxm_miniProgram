(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/acceptOrder/orderDetail/orderDetail"],{"0205":function(t,e,n){"use strict";n.r(e);var i=n("6c7c"),o=n("8bd3");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("06cf");var s,u=n("f0c5"),r=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"33626a3a",null,!1,i["a"],s);e["default"]=r.exports},"06cf":function(t,e,n){"use strict";var i=n("70a1"),o=n.n(i);o.a},"07a5":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=u(n("a34a")),o=n("6c29"),a=n("8b93"),s=u(n("a95f"));function u(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,i,o,a,s){try{var u=t[a](s),r=u.value}catch(c){return void n(c)}u.done?e(r):Promise.resolve(r).then(i,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}var l=function(){n.e("components/perFunctionInfo/leaveMess1/leaveMess").then(function(){return resolve(n("d2ae"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/helang-compress/helang-compress").then(function(){return resolve(n("d5f6"))}.bind(null,n)).catch(n.oe)},f={components:{LeaveMess:s.default,LeaveMess1:l,helangCompress:d},data:function(){return{truemoney:0,textFocus:!1,order_id:"",action:getApp().globalData.imgBaseUrl+"/common/upload/image.html",navTop:getApp().globalData.navTop,navHeight:getApp().globalData.navHeight,showliuyan:!1,showModal:!1,showReply:!1,alldata:"",page:1,page1:1,liuList:[],allLiu:0,huiList:[],comment:"",img:[],fid:0,imgBaseUrl:getApp().globalData.imgBaseUrl,comment_up_id:0,placeholder:"",up_user_id:"",inform:"",juType:2,task_comment_id:"",inform_user_id:"",status:"loading",iconType:"flower",loadText:{loadmore:"轻轻上拉",loading:"努力加载中",nomore:"实在没有了"},is_Write1:!1,status1:"loading"}},methods:{onBottom:function(){if("nomore"==this.status1)return!1;this.getliu()},showWrite:function(e,n){var i=this;t.requestSubscribeMessage({tmplIds:["Q0dB1QJc9GcGSfT5tpj6GBbf53JiHhz6RDQZOVM6i3Y"],complete:function(t){i.is_Write1=!1,i.comment="",i.comment_up_id=0,i.img=[],i.$refs["uUpload"].clear(),void 0==e?(i.fid=0,i.up_user_id=i.alldata.user_id):(i.fid=e,i.up_user_id=n),i.showliuyan=!i.showliuyan}})},showWrite1:function(e,n,i){var o=this;t.requestSubscribeMessage({tmplIds:["Q0dB1QJc9GcGSfT5tpj6GBbf53JiHhz6RDQZOVM6i3Y"],complete:function(t){o.is_Write1=!0,o.img=[],o.$refs["uUpload"].clear(),o.placeholder="回复 @"+i+"：",o.comment="",o.comment_up_id=e,o.up_user_id=n,o.showliuyan=!o.showliuyan}})},toMinePage:function(e){t.navigateTo({url:"/pages/community/minePage/minePage?id="+e})},toPraise:function(e,n,i,a,s){var u=this;(0,o.Praise)({data:{type:e,task_comment_id:n,praise_user_id:i,user_id:JSON.parse(t.getStorageSync("user")).id}}).then((function(t){200==t.code&&(0==s?1==e?(u.liuList[a].is_praise=!0,u.liuList[a].praise_count++,u.$forceUpdate()):(u.liuList[a].is_praise=!1,u.liuList[a].praise_count--,u.$forceUpdate()):(console.log(u.huiList,a),1==e?(u.huiList[a].is_praise=!0,u.huiList[a].praise_count++,u.$forceUpdate()):(u.huiList[a].is_praise=!1,u.huiList[a].praise_count--,u.$forceUpdate())))}))},getList:function(){var t=this;(0,o.listComment)({where:{task_id:this.alldata.getTask.id},limit:10,page:this.page}).then((function(e){200==e.code?(t.allLiu=e.result.count,t.liuList=t.liuList.concat(e.result.data),t.page++,e.result.count<=10&&(t.status="nomore")):t.status="nomore"}))},onSuccess:function(e,n,i,o){200==e.code?this.img.push({path:e.result.src}):t.showToast({title:e.message,icon:"none"})},beforeUpload:function(e,n){var o=this;return c(i.default.mark((function a(){return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.showLoading({title:"检测中...",mask:!0}),a.prev=1,a.next=4,o.$refs.helangCompress.compress({src:n[e].url}).then(function(){var t=c(i.default.mark((function t(a){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.$check.checkImg1(e,a,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](1),console.log("e",a.t0);case 9:case"end":return a.stop()}}),a,null,[[1,6]])})))()},onRemove:function(e,n){var i=this;(0,a.delImages)(this.img[e]).then((function(n){t.showToast({title:n.message,icon:"none"}),200==n.code&&i.img.splice(e,1)}))},addComm:function(){var e=this;return c(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(""==e.comment&&e.img.length<1)){n.next=3;break}return t.showToast({title:"内容和图片至少选择一样评论",icon:"none"}),n.abrupt("return",!1);case 3:return n.prev=3,n.next=6,e.$check.checkTxt(e.comment);case 6:n.sent,n.next=13;break;case 9:return n.prev=9,n.t0=n["catch"](3),e.comment="",n.abrupt("return",!1);case 13:t.showLoading({title:"提交中...",mask:!0}),(0,o.insertComment)({task_id:e.alldata.id,data:{fid:e.fid,comment:e.comment,img:e.img,comment_up_id:e.comment_up_id,up_user_id:e.up_user_id}}).then((function(n){t.showToast({title:n.message,icon:"none"}),t.hideLoading(),200==n.code&&(e.showliuyan=!e.showliuyan,e.is_Write1?(e.page1=1,e.huiList=[],e.status1="loading",e.getliu()):(e.page=1,e.liuList=[],e.status="loading",e.getList()))}));case 15:case"end":return n.stop()}}),n,null,[[3,9]])})))()},showPop:function(e,n){var i=this,o=[];e.forEach((function(t){o.push(i.imgBaseUrl+t.path)})),t.previewImage({current:n,urls:o})},moreBtn1:function(e,n){var i=this;t.showActionSheet({itemList:JSON.parse(t.getStorageSync("user")).id==n?["我要删除"]:["我要举报"],itemColor:JSON.parse(t.getStorageSync("user")).id==n?"#ff0000":"#000000",success:function(a){JSON.parse(t.getStorageSync("user")).id!=n?(i.inform="",i.juType=1,i.task_comment_id=e,i.inform_user_id=n,i.showModal=!i.showModal):t.showModal({title:"警告",content:"确定要删除该评论吗",success:function(n){n.confirm?(0,o.delComment)({id:e,user_id:JSON.parse(t.getStorageSync("user")).id}).then((function(e){t.showToast({title:e.message,icon:"none"}),200==e.code&&(i.page=1,i.liuList=[],i.status="loading",(0,o.listComment)({where:{task_id:i.alldata.id},limit:10,page:i.page}).then((function(t){200==t.code?(i.allLiu=t.result.count,i.liuList=i.liuList.concat(t.result.data),i.page++,i.showReply=!1,t.result.count<=10&&(i.status="nomore")):(i.allLiu=0,i.status="nomore")})))})):n.cancel}})},fail:function(t){console.log(t.errMsg)}})},moreBtn:function(){var e=this;3==this.alldata.getTask.task_state&&1==this.alldata.getTask.static_cancel.code||4==this.alldata.getTask.task_state?t.showActionSheet({itemList:["删除订单"],itemColor:"#ff0000",success:function(n){t.showModal({title:"提示",content:"确定要删除该订单吗",success:function(n){n.confirm?(t.showLoading({title:"提交中……",mask:!0}),(0,o.delOrder)({id:e.alldata.id}).then((function(e){t.hideLoading(),t.showToast({title:e.message,icon:"none"}),200==e.code&&setTimeout((function(){t.navigateBack()}),1500)}))):n.cancel}})},fail:function(t){console.log(t.errMsg)}}):t.showActionSheet({itemList:["取消订单","举报"],success:function(n){var i=this;1==n.tapIndex?(e.inform="",e.juType=2,e.showModal=!e.showModal):t.showModal({cancelText:"继续任务",title:"温馨提示",content:"您已接单若取消订单将扣除您的信誉分，若重复多次取消将作封号处理",success:function(e){e.confirm?(t.showLoading({title:"提交中……",mask:!0}),(0,o.OrderupdateTaskState)({order_id:i.alldata.id,order_static:3}).then((function(e){t.hideLoading(),t.showToast({title:e.message,icon:"none"}),200==e.code&&i.getOrder()}))):e.cancel}})},fail:function(t){console.log(t.errMsg)}})},showhf:function(e){this.page1=1,this.huiList=[],this.fid=e,t.showLoading({title:"加载中……",mask:!0}),this.showReply=!this.showReply,this.getliu()},getliu:function(){var e=this;(0,o.listComment)({where:{fid:this.fid},limit:10,page:this.page1}).then((function(n){t.hideLoading(),200==n.code?(e.huiList=e.huiList.concat(n.result.data),e.page1++,n.result.count<=10&&(e.status1="nomore")):e.status1="nomore"}))},call:function(){t.makePhoneCall({phoneNumber:this.alldata.getTask.user_phone})},submit:function(){var e=this;if(""==this.inform)return t.showToast({title:"请输入举报内容",icon:"none"}),!1;t.showLoading({title:"提交中……",mask:!0});var n={};1==this.juType?(n={task_comment_id:this.task_comment_id,inform_user_id:this.inform_user_id,inform:this.inform},liuInform({data:n}).then((function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),200==n.code&&(e.showModal=!e.showModal)}))):(n={task_id:this.alldata.getTask.id,inform_user_id:this.alldata.getTask.user_id,inform:this.inform},(0,o.Inform)({data:n}).then((function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),200==n.code&&(e.showModal=!e.showModal)})))},getOrder:function(){var e=this;(0,o.getInfoOrder)({id:this.order_id}).then((function(n){t.hideLoading(),200==n.code&&(e.alldata=n.result,e.getList(),e.truemoney=e.$Numcheck.rounding(Number(e.alldata.getTask.true_urgent_price)+Number(e.alldata.getTask.good_prepay)+Number(e.alldata.getTask.money),2))}))},haveCompleted:function(){var e=this,n="";if(1==this.alldata.order_static&&1==this.alldata.getTask.static_cancel.code)n=2;else{if(1==this.alldata.order_static&&0==this.alldata.getTask.static_cancel.code)return t.showLoading({title:"提交中……",mask:!0}),n=3,(0,o.taskOrderCancel)({order_id:this.alldata.id,order_static:n}).then((function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),200==n.code&&e.getOrder()})),!1;if(3!=this.alldata.order_static||0!=this.alldata.getTask.static_cancel.code)return!1;n=1}t.showModal({title:"提示",content:"确定执行此操作吗？",success:function(i){i.confirm?(t.showLoading({title:"提交中……",mask:!0}),(0,o.OrderupdateTaskState)({order_id:e.alldata.id,order_static:n}).then((function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),200==n.code&&e.getOrder()}))):i.cancel}})},haveCompleted1:function(){var e=this;t.showModal({title:"提示",content:"确定执行此操作吗？",success:function(n){n.confirm?(t.showLoading({title:"提交中……",mask:!0}),(0,o.taskUpdateState)({task_id:e.alldata.getTask.id,task_state:1}).then((function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),e.getOrder()}))):n.cancel}})}},onReachBottom:function(){if("nomore"==this.status)return!1;this.status,this.getList()},onLoad:function(e){t.showLoading({title:"加载中...",mask:!0}),this.order_id=e.id,this.getOrder()}};e.default=f}).call(this,n("543d")["default"])},"0dac":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"21b6"))}},o=function(){var t=this,e=t.$createElement;t._self._c},a=[]},"1f3a":function(t,e,n){"use strict";n.r(e);var i=n("e863"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},4942:function(t,e,n){},"6c7c":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"21b6"))},uCountDown:function(){return n.e("node-modules/uview-ui/components/u-count-down/u-count-down").then(n.bind(null,"b16b"))},uLoadmore:function(){return n.e("node-modules/uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"811d"))},uPopup:function(){return n.e("node-modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"d202"))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-upload/u-upload")]).then(n.bind(null,"f218"))},helangCompress:function(){return n.e("components/helang-compress/helang-compress").then(n.bind(null,"d5f6"))}},o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.textFocus=!0},t.e1=function(e){t.textFocus=!1},t.e2=function(e){t.showReply=!t.showReply},t.e3=function(e){t.showModal=!1})},a=[]},"70a1":function(t,e,n){},"8bd3":function(t,e,n){"use strict";n.r(e);var i=n("07a5"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},a95f:function(t,e,n){"use strict";n.r(e);var i=n("0dac"),o=n("1f3a");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("f958");var s,u=n("f0c5"),r=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"c4657df0",null,!1,i["a"],s);e["default"]=r.exports},df02:function(t,e,n){"use strict";(function(t){n("394a");i(n("66fd"));var e=i(n("0205"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},e863:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{curHelpInfo:{type:Array,value:[]}},data:function(){return{imgBaseUrl:getApp().globalData.imgBaseUrl}},methods:{toMinePage:function(t){this.$emit("toMinePage",t)},moreBtn:function(t,e){this.$emit("moreBtn",t,e)},showPop:function(t,e){this.$emit("showPop",t,e)},showhf:function(t){this.$emit("showhf",t)},showWrite:function(t,e){this.$emit("showWrite",t,e)},praise:function(t,e,n,i,o){this.$emit("praise",t,e,n,i,o)}}};e.default=i},f958:function(t,e,n){"use strict";var i=n("4942"),o=n.n(i);o.a}},[["df02","common/runtime","common/vendor"]]]);